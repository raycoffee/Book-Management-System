FROM node:18

WORKDIR /usr/src/app

COPY package*.json ./

RUN npm install --only=production

COPY . .


ARG DATABASE
ARG DATABASE_PASSWORD
ARG JWT_SECRET
ARG REFRESH_TOKEN_SECRET
ARG GOOGLE_API_KEY
ARG PORT


ENV DATABASE=$DATABASE
ENV DATABASE_PASSWORD=$DATABASE_PASSWORD
ENV JWT_SECRET=$JWT_SECRET
ENV REFRESH_TOKEN_SECRET=$REFRESH_TOKEN_SECRET
ENV GOOGLE_API_KEY=$GOOGLE_API_KEY
ENV PORT=$PORT

EXPOSE 3001

CMD ["node", "server.js"]